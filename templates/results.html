{% extends "base.html" %}
{% block content %}
  <div class="card">
    <h2>Results</h2>
    <p>Your average chosen investment across the 10 rounds was <strong>{{ '%.2f'|format(average_x) }}</strong> points.</p>
    <p>The randomly selected round is <strong>R = {{R}}</strong>. Your payoff equals your wealth in that round: <strong>{{ '%.2f'|format(final_payoff) }}</strong> points.</p>
    <details>
      <summary>See round-by-round outcomes</summary>
      <table class="table">
        <thead><tr><th>Round</th><th>x</th><th>Won?</th><th>Wealth</th></tr></thead>
        <tbody>
          {% for r in rounds %}
            {% set won = r.get('win', (r.get('flip') == 'heads')) %}
            <tr>
              <td>{{ r.round }}</td>
              <td>{{ r.x }}</td>
              <td>{{ 'win' if won else 'no win' }}</td>
              <td>{{ '%.2f'|format(r.wealth) }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </details>
    <a class="btn" href="{{ url_for('index') }}">Restart</a>
  </div>
{% endblock %}

